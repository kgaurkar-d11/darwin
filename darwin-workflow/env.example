# Darwin Workflow Configuration Example
# Copy this file to .env and update with your actual values
# DO NOT commit the .env file to version control

# ==============================================================================
# CORE APPLICATION CONFIGURATION
# ==============================================================================

# Application environment (local, dev, stag, uat, prod)
ENV=local

# Workflow application URLs
WORKFLOW_APP_LAYER_URL=http://localhost:8000
WORKFLOW_APP_LAYER_PUBLIC_URL=http://localhost:8000
WORKFLOW_UI_BASE_URL=http://localhost:8000/workflows/

# Default callback URL for workflow events
DEFAULT_CALLBACK_URL=http://localhost:8000/events

# Default start date for workflows (ISO 8601 format)
WORKFLOW_START_DATE=2023-06-03T05:55:35Z

# ==============================================================================
# AIRFLOW CONFIGURATION
# ==============================================================================

# Airflow server URL
AIRFLOW_URL=http://localhost:8080

# Airflow authentication token (Basic auth or Bearer token)
AIRFLOW_AUTH_TOKEN=

# Airflow S3 folder for artifacts
AIRFLOW_S3_FOLDER=workflow/airflow_artifacts

# Airflow logs base path
AIRFLOW_LOGS_BASE_PATH=/root/airflow/fsx/workspace

# Maximum number of concurrent active tasks
MAX_ACTIVE_TASKS=128

# Default timezone for cron schedules (e.g., UTC, IST, America/New_York)
DEFAULT_CRON_TIMEZONE=UTC

# Number of high availability clusters
NUM_HA_CLUSTERS=3

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# Airflow MySQL Database
AIRFLOW_MYSQL_HOST=localhost
AIRFLOW_MYSQL_USERNAME=airflow_user
AIRFLOW_MYSQL_PASSWORD=airflow_password
AIRFLOW_MYSQL_DATABASE=airflow
AIRFLOW_MYSQL_PORT=3306

# Workflow MySQL Database
WORKFLOW_DB_HOST=localhost
WORKFLOW_DB_USERNAME=workflow_user
WORKFLOW_DB_PASSWORD=workflow_password
WORKFLOW_DB_NAME=workflow
WORKFLOW_DB_PORT=3306

# ==============================================================================
# STORAGE CONFIGURATION (S3 or S3-Compatible)
# ==============================================================================

# S3 bucket name for storing artifacts
S3_BUCKET_NAME=workflow-artifacts

# S3 path prefix for workflow artifacts (without bucket name)
# Example: darwin_workflow/airflow_artifacts
S3_ARTIFACT_PREFIX=workflow/airflow_artifacts

# S3 path for DAG files synchronization (full s3:// path)
# Used by Airflow DAG sync process
S3_DAGS_FOLDER=s3://workflow-artifacts/workflow/airflow_artifacts/dags/

# S3 path for Airflow remote logs (full s3:// path)
# Used by Airflow for storing task logs remotely
S3_LOGS_FOLDER=s3://workflow-artifacts/workflow/airflow_artifacts/logs

# Local path where Airflow DAGs are stored
AIRFLOW_DAGS_LOCAL_PATH=/root/airflow/dags/

# ==============================================================================
# EXTERNAL SERVICES CONFIGURATION
# ==============================================================================

# Compute orchestration service
COMPUTE_SERVICE_URL=http://localhost:9000
COMPUTE_APP_LAYER_URL=http://localhost:9000/cluster

# Commuter notebook viewer service (optional)
COMMUTER_URL=http://localhost:8888/view

# Events processing service (optional)
EVENTS_SERVICE_URL=http://localhost:8001

# Pelican orchestration gateway (optional)
PELICAN_URL=http://localhost:8002

# Campaign Manager service (optional, used in notebooks)
CAMPAIGN_MANAGER_BASE_URL=http://localhost:8080

# ==============================================================================
# MONITORING & OBSERVABILITY CONFIGURATION
# ==============================================================================

# Datadog API configuration (optional)
DATADOG_API_URL=https://api.datadoghq.com/api/v2/series
DATADOG_API_KEY=

# ==============================================================================
# SLACK INTEGRATION CONFIGURATION
# ==============================================================================

# Slack API URL
SLACK_API_URL=https://slack.com/api/

# Slack API token for notifications (optional)
SLACK_TOKEN=

# Username displayed in Slack notifications
SLACK_USERNAME=Workflow Alert

# Default Slack channel for notifications
DEFAULT_SLACK_CHANNEL=workflow-alerts

# ==============================================================================
# GIT INTEGRATION CONFIGURATION
# ==============================================================================

# Git personal access token (optional)
GIT_TOKEN=

# Git feature configuration token (optional)
GIT_FC_TOKEN=

# Default Git repository owner/organization (optional)
GIT_OWNER=

# ==============================================================================
# ELASTICSEARCH CONFIGURATION
# ==============================================================================

# Elasticsearch cluster URL
ELASTICSEARCH_URL=http://localhost:9200

# Elasticsearch credentials (optional, for secured clusters)
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=

# Elasticsearch index names (optional, defaults provided)
ES_INDEX_WORKFLOW=workflow_cud
ES_INDEX_TRACKING=workflow_tracking
ES_INDEX_JOB_CLUSTERS=job_clusters
ES_INDEX_WORKFLOW_CLUSTERS=workflow_clusters
ES_INDEX_WORKFLOW_HISTORY=workflow_cud_history
ES_INDEX_LATEST_TASK_RUN=latest_task_run

# ==============================================================================
# PACKAGE REPOSITORY CONFIGURATION
# ==============================================================================

# Python package index URL (optional, for private PyPI servers)
PYPI_INDEX_URL=
PYPI_TRUSTED_HOST=

# ==============================================================================
# FILE SYSTEM PATHS CONFIGURATION
# ==============================================================================

# FSX file system base paths
FSX_BASE_PATH=/var/www/fsx/workspace/
FSX_BASE_PATH_DYNAMIC=/home/ray/fsx/workspace/

# ==============================================================================
# PRODUCTION INFRASTRUCTURE CONFIGURATION (for production mode only)
# ==============================================================================

# Consul address for configuration management
# CONSUL_ADDR=config-store-prod.example.com

# Vault address for secrets management
# VAULT_ADDR=http://secret-store-prod.example.com

# NFS server for FSx mounting (IP address or hostname)
# For production/uat environments, use FSX_NFS_SERVER_PROD
# For other environments, use FSX_NFS_SERVER_DEV
# Or use FSX_NFS_SERVER as a fallback for all environments
# FSX_NFS_SERVER_PROD=10.0.0.1
# FSX_NFS_SERVER_DEV=10.0.0.2
# FSX_NFS_SERVER=10.0.0.1

# ==============================================================================
# APPLICATION BEHAVIOR CONFIGURATION
# ==============================================================================

# Request timeout in seconds
REQUEST_TIMEOUT=600

# Kubernetes namespace for deployments
K8S_NAMESPACE=default

# ==============================================================================
# CORS CONFIGURATION
# ==============================================================================

# Comma-separated list of allowed CORS origins
CORS_ORIGINS=http://localhost:7700,http://localhost:3000

# ==============================================================================
# NOTES
# ==============================================================================
#
# Security Best Practices:
# - Never commit the .env file to version control
# - Use strong, unique passwords for all database accounts
# - Rotate credentials regularly
# - Use secrets management systems in production (e.g., HashiCorp Vault, AWS Secrets Manager)
# - Enable SSL/TLS for all production services
# - Follow the principle of least privilege for all service accounts
#
# Getting Started:
# 1. Copy this file to .env: cp env.example .env
# 2. Update all values with your actual configuration
# 3. Ensure the .env file is in your .gitignore
# 4. Source the environment: source .env (or use direnv)
# 5. Start the application
#
# For detailed documentation, see CONFIGURATION.md
#

