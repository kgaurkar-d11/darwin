apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-config
  labels:
    {{- include "darwin.labels" . | nindent 4 }}
data:
  environment: "kubernetes"
  platform: "darwin"
  version: "{{ .Chart.AppVersion }}"
  cluster-name: "{{ .Values.global.namespace | default "darwin" }}"
  components: |
    services: {{ .Values.services.enabled }}
    datastores: {{ .Values.datastores.enabled }}
  architecture: |
    type: "umbrella"
    subcharts: 
      - datastores
      - services
  deployment-order: |
    1: datastores (databases, messaging)
    2: services (applications)
