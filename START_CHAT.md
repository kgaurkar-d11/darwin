# Darwin Distribution - AI Agent Entry Point

Darwin Distribution is the deployment orchestration project for the Darwin ML Platform. It builds Docker images from service submodules and deploys the entire platform to Kubernetes using Helm charts.

---

## Quick Navigation

**What do you want to do?** Load only the prompts you need:

| Task | Load These Prompts | Command |
|------|-------------------|---------|
| **Understand the project** | `.prompts/00-overview.md` | Get architecture overview |
| **Initialize configuration** | `.prompts/00-overview.md` | Run `sh init.sh` |
| **Set up local environment** | `.prompts/04-kind-cluster.md` | Create Kind cluster |
| **Build images** | `.prompts/01-build-system.md` | Run `sh setup.sh` |
| **Deploy the platform** | `.prompts/02-deployment.md` | Run `sh start.sh` |
| **Add a new service** | `.prompts/03-add-service.md` | Register & deploy new service |
| **Customize Helm charts** | `.prompts/05-helm-charts.md` | Modify chart structure |
| **Configure databases** | `.prompts/06-datastores.md` | MySQL, Cassandra, Kafka, etc. |
| **Configure services** | `.prompts/07-services.md` | Service settings & routing |
| **Debug issues** | `.prompts/08-troubleshooting.md` | Common problems & fixes |

---

## Setup Workflow

The recommended workflow for setting up the platform:

```
1. sh init.sh     # Select which services to enable (one-time setup)
2. sh setup.sh    # Build images and prepare cluster
3. sh start.sh    # Deploy to Kubernetes
```

---

## Common Task Combinations

### First-Time Setup (Full Platform)
```
1. Run: sh init.sh                    # Configure services interactively
2. Load: 00-overview.md → 04-kind-cluster.md → 01-build-system.md → 02-deployment.md
```

### Add a New Microservice
```
Load: 03-add-service.md → 01-build-system.md
```

### Modify Infrastructure
```
Load: 05-helm-charts.md → 06-datastores.md (or 07-services.md)
```

### Debugging Deployment Issues
```
Load: 08-troubleshooting.md → (relevant component prompt)
```

---

## Key Files Reference

| File | Purpose |
|------|---------|
| `init.sh` | Interactive service selection wizard (run first) |
| `.setup/enabled-services.yaml` | User-selected services config (generated by init.sh) |
| `services.yaml` | Application registry - defines available services, datastores, operators |
| `setup.sh` | Creates cluster & builds all images |
| `start.sh` | Deploys platform via Helm with config overrides |
| `config.env` | Runtime configuration (generated) |
| `helm/darwin/` | Main Helm umbrella chart |
| `kind/` | Local Kubernetes cluster config |

---

## Agent Instructions

1. **Run `init.sh` first** - This creates `.setup/enabled-services.yaml` with user's service selections
2. **Load prompts on-demand** - Only read prompts relevant to the current task
3. **Check `.setup/enabled-services.yaml`** - This is the source of truth for which services are enabled
4. **Check `services.yaml`** - Defines available applications, datastores, and operators
5. **Check `config.env`** - Contains current KUBECONFIG and DOCKER_REGISTRY
6. **Respect `.odin/` conventions** - Each submodule must have build.sh, setup.sh, start.sh

When in doubt, start with `.prompts/00-overview.md` for full context.

