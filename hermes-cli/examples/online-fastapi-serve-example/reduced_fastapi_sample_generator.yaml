# Project Configuration
repository: # required
  name: "house-price-prediction-mlserve-test" # required
  description: "house price prediction" # required
  author: "user@serve.com" # not required, default: git user email on local
  output_path: "examples/"
  type: "api" # required. choices = [fastapi, workflow]

# Model Configuration
model: # optional
  author: "user@serve.com" # not required, default: git user email on local
  flavor: "sklearn" # required
  path: "<mlflow-artifact-link>" # required

# Schema Definition for the input and output of the REST API
# Conditional on repository.type == fastapi
serve_endpoint_schemas: # optional
  # endpoint path should be generated by default
  # TODO: ask for method type eg Get, how is it taken as an input? do we have a default?
  # TODO: do we take headers too?
  # multiple request and response schemas to be supported
  endpoints:
    - endpoint_name: "house-price-prediction"
      method: "POST"
      request_schema:
        body:
          - name: "area"
            type: "int"
            description: "area of the house"
            required: false
          - name: "bedrooms"
            type: "int"
            description: "number of bedrooms"
            required: true
      response_schema:
        body:
          - name: "price"
            type: "int"
            description: "price of the house"
            required: true

    - endpoint_name: get_house
      method: "GET"
      request_schema:
        body:
          - name: house_id
            type: int
            description: ID of the house
            required: true
      response_schema:
        body:
          - name: house_details
            type: dict
            description: Details of the house
            required: true

# Environment Configuration will not be taken

# check MCP for example on singleton implementation
# Primary keys should be fetched during validation using the feature store APIs
feature_store: # optional
  feature_groups: # optional
    - name: "ds_bundle_promo_metadata_fg" # optional
      version: "v1" # optional
      features: # compulsory
        - "promotions"
        - "timestamp"
    - name: "asset_rank_fg"
      version: "v1" # optional
      features: # optional
        - "assets_ranked"
        - "timestamp"

# FastAPI serve service functions should by default have 3 functions:
# 1. preprocessing(raw_data: dict) -> processed_data: dict
# 2. inference(model, data) -> inference: dict
# 3. post_processing(inference: dict) -> processed_output: dict